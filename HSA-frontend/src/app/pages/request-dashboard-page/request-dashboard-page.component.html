<app-page-template [title]="'Requests'">
    @if (hasNoData()) {
      <app-loading-fallback stringToDisplay="Loading the request table"></app-loading-fallback>
    }
    @else {
      <div class="table-header">
        <mat-tab-group class="tab-container" (selectedTabChange)="onTabChange($event)" [disablePagination]="true">
          <mat-tab [label]="'Approved'">
            <div class="small-box mat-elevation-z4">
              <app-table-component
                editRedirect=""
                [fetchedData]="tabStates.Approved.data"
                [deleteRequest]="requestService.deleteRequest.bind(requestService)"
                [approveRequest]="requestService.approveDenyRequest.bind(requestService)"
                [loadDataToTable]="this.loadDataToTable.bind(this)"
                searchHint="Search by any keywords"
                [status]="'approved'"
                [checkbox]="'none'"
                [hideValues]="['Id']"
                [width]="'auto'"
                [clickableRows]="true"
                [onRowClick]="redirectRequestDetails.bind(this)"
              ></app-table-component>
            </div>
          </mat-tab>
          <mat-tab [label]="'Pending'">
            <div class="large-box mat-elevation-z4">
              <app-table-component
                editRedirect="/jobs/edit"
                [fetchedData]="tabStates.Pending.data"
                [deleteRequest]="requestService.deleteRequest.bind(requestService)"
                [approveRequest]="requestService.approveDenyRequest.bind(requestService)"
                [loadDataToTable]="this.loadDataToTable.bind(this)"
                searchHint="Search by any keywords"
                [status]="'received'"
                [checkbox]="'approval'"
                [hideValues]="['Id']"
                [width]="'auto'"
                [clickableRows]="true"
                [onRowClick]="redirectRequestDetails.bind(this)"
              ></app-table-component>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
      <div class="spacer"></div>
    }
</app-page-template>
